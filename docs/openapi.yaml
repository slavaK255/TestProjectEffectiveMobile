{"openapi":"3.0.1","info":{"title":"Bank_REST_API","description":"Bank_REST_API","termsOfService":"http://swagger.io/terms/","contact":{"name":"Svyatoslav"},"license":{"name":"Apache 2.0","url":"http://springdoc.org"},"version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Card management","description":"Operations with cards"},{"name":"Block request management","description":"Operations with block card request"},{"name":"User management","description":"Operations with user"}],"paths":{"/api/v1/user/new":{"post":{"tags":["User management"],"summary":"Create new user","description":"create new user then return create user response Dto","operationId":"createNewUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequestDto"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CreateUserResponseDto"}}}}}}},"/api/v1/card/transfer":{"post":{"tags":["Card management"],"summary":"Transfer between cards","description":"Transfers money between two cards belonging to the authenticated user","operationId":"transferBetweenCards","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransferRequestDto"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CardCurrentBalanceDto"}}}}}}}},"/api/v1/block_request/new":{"post":{"tags":["Block request management"],"summary":"Create block card request","description":"Create a new block card request and return created request details","operationId":"createBlockCardRequest","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockCardDto"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BlockCardDto"}}}}}}},"/api/auth/token":{"post":{"tags":["auth-controller"],"operationId":"getNewAccessToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshJwtRequestDto"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JwtResponseDto"}}}}}}},"/api/auth/refresh":{"post":{"tags":["auth-controller"],"operationId":"getNewRefreshToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshJwtRequestDto"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JwtResponseDto"}}}}}}},"/api/auth/login":{"post":{"tags":["auth-controller"],"operationId":"tryToLogin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JwtRequestDto"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JwtResponseDto"}}}}}}},"/api/v1/user/update":{"patch":{"tags":["User management"],"summary":"Update user","description":"Update existing user information","operationId":"updateUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/v1/card/status/change":{"patch":{"tags":["Card management"],"summary":"Change card status","description":"Updates the status of an existing card (ACTIVE, BLOCKED, EXPIRED, DELETED)","operationId":"changeStatus","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeStatusDto"}}},"required":true},"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ChangeStatusDto"}}}}}}},"/api/v1/user/get/{userId}":{"get":{"tags":["User management"],"summary":"Get user by ID","description":"Retrieve user information by user ID","operationId":"getUserById","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/v1/card/new":{"get":{"tags":["Card management"],"summary":"Create new card","description":"Creates a new bank card for the specified user","operationId":"createCard","parameters":[{"name":"createCardDto","in":"query","required":true,"schema":{"$ref":"#/components/schemas/CreateCardDto"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CreateCardResponseDto"}}}}}}},"/api/v1/card/get/page":{"get":{"tags":["Card management"],"summary":"Get filtered cards page","description":"Retrieves a paginated and filtered list of cards","operationId":"getCardPage","parameters":[{"name":"cardFilterDto","in":"query","required":true,"schema":{"$ref":"#/components/schemas/CardFilterDto"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageCardDto"}}}}}}},"/api/v1/card/all/get":{"get":{"tags":["Card management"],"summary":"Get all cards","description":"Retrieves a list of all cards in the system (admin only)","operationId":"getAllCard","responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CardDto"}}}}}}}},"/api/v1/block_request/get/{requestId}":{"get":{"tags":["Block request management"],"summary":"Get block request by ID","description":"Retrieve block card request details by its ID","operationId":"getById","parameters":[{"name":"requestId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BlockCardDto"}}}}}}},"/api/v1/block_request/get/all":{"get":{"tags":["Block request management"],"summary":"Get all block requests","description":"Retrieve a list of all block card requests","operationId":"getAll","responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BlockCardDto"}}}}}}}},"/api/v1/user/delete/{userId}":{"delete":{"tags":["User management"],"summary":"Delete user","description":"Delete user by specified user ID","operationId":"deleteUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"ProblemDetail":{"type":"object","properties":{"type":{"type":"string","format":"uri"},"title":{"type":"string"},"status":{"type":"integer","format":"int32"},"detail":{"type":"string"},"instance":{"type":"string","format":"uri"},"properties":{"type":"object","additionalProperties":{"type":"object"}}}},"CreateUserRequestDto":{"required":["login","password","role","userName"],"type":"object","properties":{"login":{"maxLength":64,"minLength":0,"type":"string"},"userName":{"maxLength":128,"minLength":0,"type":"string"},"password":{"maxLength":128,"minLength":0,"type":"string"},"role":{"type":"string","enum":["ADMIN","USER"]}}},"CreateUserResponseDto":{"type":"object","properties":{"login":{"type":"string"},"userName":{"type":"string"},"role":{"type":"string","enum":["ADMIN","USER"]}}},"TransferRequestDto":{"required":["amount","sourceCard","targetCard"],"type":"object","properties":{"sourceCard":{"type":"string"},"targetCard":{"type":"string"},"amount":{"minimum":0.01,"exclusiveMinimum":false,"type":"number"}}},"CardCurrentBalanceDto":{"type":"object","properties":{"cardNumber":{"type":"string"},"balance":{"type":"number"}}},"BlockCardDto":{"required":["card_id","reason"],"type":"object","properties":{"card_id":{"type":"integer","format":"int64"},"reason":{"maxLength":4096,"minLength":1,"type":"string"},"executed":{"type":"boolean"}}},"RefreshJwtRequestDto":{"type":"object","properties":{"refreshToken":{"type":"string"}}},"JwtResponseDto":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}},"JwtRequestDto":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string"}}},"UserDto":{"required":["id"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"login":{"maxLength":64,"minLength":0,"type":"string"},"userName":{"maxLength":128,"minLength":0,"type":"string"},"password":{"maxLength":128,"minLength":0,"type":"string"},"role":{"type":"string","enum":["ADMIN","USER"]}}},"ChangeStatusDto":{"required":["cardId","cardStatus"],"type":"object","properties":{"cardId":{"type":"integer","format":"int64"},"cardStatus":{"type":"string","enum":["ACTIVE","BLOCKED","EXPIRED","DELETED"]}}},"CreateCardDto":{"required":["expiryDate","userName"],"type":"object","properties":{"cardNumber":{"maxLength":16,"minLength":16,"type":"string"},"userName":{"type":"string"},"expiryDate":{"type":"string","format":"date"}}},"CreateCardResponseDto":{"type":"object","properties":{"cardNumber":{"type":"string"},"userName":{"type":"string"},"expiryDate":{"type":"string","format":"date"},"status":{"type":"string","enum":["ACTIVE","BLOCKED","EXPIRED","DELETED"]},"balance":{"type":"number"}}},"CardFilterDto":{"type":"object","properties":{"cardNumber":{"type":"string"},"expiryDateStart":{"type":"string","format":"date"},"expiryDateEnd":{"type":"string","format":"date"},"cardStatus":{"type":"string","enum":["ACTIVE","BLOCKED","EXPIRED","DELETED"]},"balance":{"type":"number"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"}}},"CardDto":{"type":"object","properties":{"cardNumber":{"type":"string"},"userId":{"type":"integer","format":"int64"},"expiryDate":{"type":"string","format":"date"},"status":{"type":"string","enum":["ACTIVE","BLOCKED","EXPIRED","DELETED"]}}},"PageCardDto":{"type":"object","properties":{"totalElements":{"type":"integer","format":"int64"},"totalPages":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/CardDto"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"unpaged":{"type":"boolean"},"paged":{"type":"boolean"}}},"SortObject":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}